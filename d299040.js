(window.webpackJsonp=window.webpackJsonp||[]).push([[15,9],{308:function(t,e,r){t.exports={}},311:function(t,e,r){"use strict";r.r(e);var n=r(64),component=Object(n.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{attrs:{width:"218",height:"200",viewBox:"0 0 218 200",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("g",{attrs:{filter:"url(#filter0_record)"}},[r("circle",{attrs:{cx:"109.5",cy:"100.5",r:"74.5",fill:"white"}})]),t._v(" "),r("rect",{attrs:{x:"93.2299",y:"68.8161",width:"13.7011",height:"63.3678",rx:"6.85057",fill:"#F65D3C"}}),t._v(" "),r("rect",{attrs:{x:"130.908",y:"79.092",width:"13.7011",height:"42.8161",rx:"6.85057",fill:"#F65D3C"}}),t._v(" "),r("rect",{attrs:{x:"112.069",y:"89.3678",width:"13.7011",height:"22.2644",rx:"6.85057",fill:"#F65D3C"}}),t._v(" "),r("rect",{attrs:{x:"72.6782",y:"82.5172",width:"13.7011",height:"35.9655",rx:"6.85057",fill:"#F65D3C"}}),t._v(" "),r("defs",[r("filter",{attrs:{id:"filter0_record",x:"0.747128",y:"0.310346",width:"217.506",height:"217.506",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[r("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),t._v(" "),r("feColorMatrix",{attrs:{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}}),t._v(" "),r("feOffset",{attrs:{dy:"8.56322"}}),t._v(" "),r("feGaussianBlur",{attrs:{stdDeviation:"17.1264"}}),t._v(" "),r("feColorMatrix",{attrs:{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}}),t._v(" "),r("feBlend",{attrs:{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}}),t._v(" "),r("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}})],1)])])}),[],!1,null,null,null);e.default=component.exports},321:function(t,e,r){"use strict";r(308)},327:function(t,e,r){"use strict";r.r(e);r(300),r(302),r(17),r(303),r(93),r(51);var n=r(304),o=r.n(n),l={sampleBits:16,sampleRate:8e3,numChannels:1,compiling:!1};function c(data,t,e){for(var i=0;i<e.length;i++)data.setUint8(t+i,e.charCodeAt(i))}var d={noResult:"Couldn’t quite catch that.",permissionDenied:"Ooops, permission error.",incompatible:"Browser incompatibility.",unknown:"Unknown Error"},h={noResult:"Make sure your device can clearly hear the song and try again",permissionDenied:"Please make sure your browser gives us recording permission",incompatible:"Your browser does not support online recording, Please change to a modern browser, we recommend Chrome",unknown:""},f={data:function(){return{isFpActive:!0,recorder:null,timerEnabled:!1,timerCount:10,isResultShow:!1,result:null,errorMsgTitle:d.noResult,errorMsg:h.noResult}},watch:{timerEnabled:function(t){var e=this;t&&setTimeout((function(){e.timerCount--}),1e3)},timerCount:{handler:function(t){var e=this;t>0&&this.timerEnabled?setTimeout((function(){e.timerCount--}),1e3):(this.recorder&&(this.recorder.stop(),this.recognize()),this.reset())},immediate:!0}},methods:{startRecord:function(){var t=this;this.timerEnabled?(console.log("stop"),this.recorder.stop(),this.recognize(),this.reset()):(console.log("start"),o.a.getPermission().then((function(){console.log("permission grant"),t.recorder=new o.a(l),t.timerEnabled=!0,t.recorder.start().then((function(){}),(function(e){t.$sentry.captureException(e),t.errorMsgTitle=e.name,t.errorMsg=e.message}))}),(function(e){console.log(e),"Permission denied"===e.message?(t.errorMsgTitle=d.permissionDenied,t.errorMsg=h.permissionDenied):"浏览器不支持 getUserMedia !"===e.message?(t.errorMsgTitle=d.incompatible,t.errorMsg=h.incompatible):(t.errorMsgTitle=d.unknown,t.errorMsg=e.message),t.isResultShow=!0})))},reset:function(){this.errorMsgTitle=d.noResult,this.errorMsg=h.noResult,this.timerEnabled=!1,this.timerCount=10,this.recorder&&(this.recorder.destroy(),this.recorder=null)},recognize:function(){var t=this,e="";e=this.isFpActive?"https://api.doreso.com/identify":"https://api.doreso.com/humming";var r=function(t,e,r,n,o,l){var d=[32,32,32,32,32,32,32,32],h=r>e?e:r,f=o,m=new ArrayBuffer(44+t.byteLength+d.length),data=new DataView(m),v=n,w=0;c(data,w,"RIFF"),w+=4,data.setUint32(w,36+t.byteLength,l),c(data,w+=4,"WAVE"),c(data,w+=4,"fmt "),w+=4,data.setUint32(w,16,l),w+=4,data.setUint16(w,1,l),w+=2,data.setUint16(w,v,l),w+=2,data.setUint32(w,h,l),w+=4,data.setUint32(w,v*h*(f/8),l),w+=4,data.setUint16(w,v*(f/8),l),w+=2,data.setUint16(w,f,l),c(data,w+=2,"data"),w+=4,data.setUint32(w,t.byteLength,l),w+=4;for(var i=0;i<t.byteLength;)data.setUint8(w,t.getUint8(i)),w++,i++;for(var _=0;_<d.length;)data.setUint8(w,d[_]),w++,_++;return data}(this.recorder.getPCM(),this.recorder.inputSampleRate,this.recorder.outputSampleRate,this.recorder.config.numChannels,this.recorder.oututSampleBits,this.recorder.littleEdian),n=new Blob([r],{type:"audio/wav"}),o=new FormData;o.append("file",n),o.append("sample_size",this.recorder.fileSize),this.$axios.$post(e,o).then((function(e){t.result=e.data,t.isResultShow=!0,console.log(e)})).catch((function(t){console.log(t)}))},uploadFile:function(){this.$refs.upload.click()},openDetailPage:function(){var t="/".concat(this.result.acrid);window.open(t,"_blank")}}},m=(r(321),r(64)),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-gray-50 h-screen"},[r("div",{staticClass:"w-3/4 flex flex-col mx-auto h-screen "},[r("div",{staticClass:"flex flex-row justify-between mt-6",attrs:{id:"header"}},[r("div",{staticClass:"h-28"},[r("Logo"),t._v(" "),r("span",{staticClass:"doreso-text"},[t._v("Song Finder for Browser")])],1),t._v(" "),r("div",{staticClass:"hidden md:flex md:h-28 inline-flex"},[r("a",{attrs:{target:"_blank",href:"https://microsoftedge.microsoft.com/addons/detail/ejfccgmelcclnoadalcepdmnpgcnglfc"}},[r("InstallEdge")],1),t._v(" "),r("a",{attrs:{target:"_blank",href:"https://chrome.google.com/webstore/detail/dpacanjfikmhoddligfbehkpomnbgblf"}},[r("InstallChrome")],1)])]),t._v(" "),r("div",{staticClass:"h-1/2 md:h-4/6 container flex flex-col mt-6 ",attrs:{id:"container"}},[t.isResultShow&&t.result?r("div",{staticClass:" absolute self-center flex mt-28",staticStyle:{"z-index":"10000"}},[r("div",{staticClass:" md:w-80 bg-white p-6 rounded-md tracking-wide shadow-lg"},[r("strong",{staticClass:"text-xl align-center cursor-pointer absolute top-2 right-4",on:{click:function(e){t.isResultShow=!1}}},[t._v("×")]),t._v(" "),r("div",{staticClass:"flex items-center mb-4"},[r("div",{staticClass:"sm"},[r("h4",{staticClass:"text-xl font-semibold"},[t._v("\n                "+t._s(t.result.title)+"\n              ")]),t._v(" "),r("h5",{staticClass:"font-semibold text-blue-600"},[t._v("\n                "+t._s(t.result.artists)+"\n              ")])])]),t._v(" "),r("div",[r("button",{staticClass:"detail-btn mt-4 mb-4",on:{click:function(e){return t.openDetailPage()}}},[r("span",{staticClass:"text-blue-400"},[t._v("View detail")])])])])]):t._e(),t._v(" "),t.isResultShow&&!t.result?r("div",{staticClass:" absolute self-center flex mt-20 md:mt-28",staticStyle:{"z-index":"10000"}},[r("div",{staticClass:"w-60 md:w-80 bg-white p-6 rounded-md tracking-wide shadow-lg"},[r("strong",{staticClass:"text-xl align-center cursor-pointer absolute top-2 right-4",on:{click:function(e){t.isResultShow=!1}}},[t._v("×")]),t._v(" "),r("div",{staticClass:"flex items-center mb-4"},[r("div",{staticClass:"sm"},[r("div",{staticClass:"mb-2"},[r("ICON",{attrs:{type:"error"}})],1),t._v(" "),r("h4",{staticClass:"text-xl font-semibold"},[t._v("\n                "+t._s(t.errorMsgTitle)+"\n                ")]),t._v(" "),r("h5",[t._v("\n                "+t._s(t.errorMsg)+"\n                ")])])])])]):t._e(),t._v(" "),r("div",{staticClass:"flex flex-row justify-center space-x-4 md:space-x-8 pt-8"},[r("div",[r("a",{staticClass:"underline",class:[{"active-record-text":t.isFpActive},"record-text"],attrs:{href:"#"},on:{click:function(e){t.isFpActive=!t.isFpActive}}},[r("ICON",{staticClass:"inline-block",attrs:{type:"record"}}),t._v(" "),r("span",[t._v("RECORD")])],1)]),t._v(" "),r("div",[r("a",{staticClass:"underline ",class:[{"active-record-text":!t.isFpActive},"record-text"],attrs:{href:"#"},on:{click:function(e){t.isFpActive=!t.isFpActive}}},[r("ICON",{staticClass:"inline-block",attrs:{type:"hum"}}),t._v(" "),r("span",[t._v("HUM/SING")])],1)])]),t._v(" "),r("div",{staticClass:"self-center py-6"},[r("button",{class:{"scale-down-center":t.timerEnabled},on:{click:function(e){return t.startRecord()}}},[r("RecordingButton")],1)]),t._v(" "),r("div",{staticClass:"block md:hidden self-center text-white text-xl font-semibold",class:{hidden:t.timerEnabled}},[t._v("\n        Click to recognize\n      ")]),t._v(" "),r("div",{staticClass:"self-center text-white text-2xl font-semibold",class:[t.timerEnabled?"md:block":"hidden",""]},[t._v("\n        Recognizing...\n      ")]),t._v(" "),r("div",{staticClass:"hidden self-center text-white text-2xl font-semibold",class:[t.timerEnabled?"hidden":"md:block",""]},[r("p",[t._v("\n          Play some music and click the\n        ")]),t._v(" "),r("p",[t._v("\n          button to recognize songs now.\n        ")])])]),t._v(" "),t._m(0)])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-row justify-between footer mt-6",attrs:{id:"footer"}},[r("div",{staticClass:"text-gray-500"},[r("div",[t._v("contact@aha-music.com")]),t._v(" "),r("div",{staticClass:"underline"},[r("a",{attrs:{href:"/privacy-policy.html"}},[t._v("Privacy Policy")])])]),t._v(" "),r("div",[r("div",{staticClass:"underline"},[r("a",{staticClass:"twitter-follow-button",attrs:{href:"https://twitter.com/MusicIdentifier?ref_src=twsrc%5Etfw","data-show-count":"false"}},[t._v("Follow @MusicIdentifier")]),t._v(" "),r("script",{attrs:{async:"",src:"https://platform.twitter.com/widgets.js",charset:"utf-8"}})])])])}],!1,null,"2fd06871",null);e.default=component.exports;installComponents(component,{Logo:r(298).default,InstallEdge:r(310).default,InstallChrome:r(299).default,ICON:r(295).default,RecordingButton:r(311).default})}}]);